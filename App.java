/*
 * This source file was generated by the Gradle 'init' task
 */
package convert;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Base64;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class App {
    public static String getMarkdown() {
        return "start of imgs\r\n" + //
                "\r\n" + //
                "![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAG7AAABuwBHnU4NQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABgwSURBVHic7d13uFxltcfx7zr0jniREpoiWFBsoNdypUR6DyLlilxRQYoUFSmiCBjgQUCkCdIUpAoIhColtJCIINgbIAQCBMSIQDRCsu4f73vChJxzcubM2mVm/z7PM4/3hmTtd+9512/27NnF3B0Raaa+qgcgItVRAIg0mAJApMEUACINpgAQaTAFgEiDKQBEGkwBINJgCgCRBlMAiDSYAkCkwRQAIg2mABBpMAWASIMpAEQaTAEg0mAKAJEGUwCINJgCQKTBFAAiDaYAEGkwBYBIgykARBpMASDSYAoAkQZTAIg0mAJApMEUACINpgAQaTAFgEiDKQBEGkwBINJgCgCRBlMAiDSYAkCkwRQAIg2mABBpsPk7LWBmywJbAesAKwKj8v8uB8zXaX0RYSYwFXgqv6YADwLXuvvUTgqbu7f/j8xGATsB2wIfQXsSIlWYBUwCrgEudffJ7RZoKwDMbBngMGAfYOF2FyYihZkBnAaMdfdpw/1HwwoAM1sYOBA4GFhqpCMUkcJNA8YCp7r7f+b1l+cZAGa2HGkX40MhwxORMkwAxrj7s0P9pSEDwMzeA1wLrBI7NhEpwWRgG3d/aLC/MOjBOzPbBLgHNb9It1oFmGBmWw72FwbcAzCztUm7EIsXNzYRKcl04KMD7QnMFQBm9ibgPmDVcsYmIiV4HFjX3Z9r/cM5vgKY2YLAVaj5RXrNqsAVZrZA6x++/hjA/sBHSxuSiJTp48CXWv9g9lcAM1saeBR4Q/njEpGSTANW7z9ZqHUP4BDU/CK97g2ks3mBvAdgZisAjwCLVDYsESnLDGBNd5/cvwewE2p+kaZYCNgZXtsDuJN0gKAoLwCbuPvPC1yGSE8wsw8BN1PsdTf3uvtHDVgWeJrir93/JykEJhW8HJGuZWb/TWr+JQte1Cxg+T7SzTzKuHHHksDNZvbhEpYl0nVyb5TR/JB+ANiyj3Qnn7L0h8BHSlymSO3lniir+fut00e6fVeZlgBuMjOdcCQC5F64idQbZRrVR7qHX9n6Q+BjFSxbpDZyD1TR/AArVrEH0G9x4EaFgDSVmf0PcCPVXXU7yoBXqfbuvS8Bm7v73RWOQaRUZvZx4AZgsQqHMdOA9m8LHO9lUgjcVfVARIpmZusB11Nt8wP1uZ33YsANecOI9CwzW5+aND90HgDPhIwi6Q+B9QNritSGmW1AfPN31IOdBsD6pLMIoywKXJ83lEjPMLMNgetIczzK06QeHLGOAsDd/wRsQHwIXJc3mEjXM7PRFNP8G+QeHLGOjwHkAaxPemZZlP4QGB1YU6R0ZvYJYByxV9s+BazfafND0EFAd/8zKQSmRNTLFgHG5Q0o0nXMbCPSczUim38Kqfn/HFEs7FcAd/8LxYTAtXlDinQNM9uY4pr/L1EFQ38GdPeHSSHwZGDZ/hDYOLCmSGHyQ3WuIfYBuk+Smv/hwJrx5wEUFAILA9fkDStSW2a2KXA1XdD8UNCJQO7+CLAe8ERg2YWBq/MGFqkdM9uM+OZ/Algv91S4ws4EdPdHSXsCkwPL9ofAZoE1RTpmZpsDPyXdby/KZNIn/6OBNedQ6KnABYXAQsBP8wYXqZyZbUF6olZXNT+UcC2Au/+V9HXg8cCyCwFX5Q0vUpn85N3o5n+ctNv/18CaAyrlYiB3f4y0J/BYYNn+EBj00cciRTKzrYArgQUDyz5G+uR/LLDmoEq7GrAlBCJTbUHgyvxGiJTGzLYGriC2+f9Kic0PJV8O7O6PU0wIXJHfEJHCmdk2FNf8kV+V56n0+wG4+2RSCEQe3OgPgW0Ca4rMxcy2A34CLDCvv9uGR0nNH3mwfFgquSFISwhE/ra5APATM9s2sKbIbGY2BriM2OZ/hIqaHyq8I5C7P0ExIXB5TmmRMGa2PcU1f+QJc22p9JZg7v4kKQQiT3FcALgsp7VIx8zsk8ClwPyBZR8mNX/kKfNtq/yegC0hEHaFE6+FwPaBNaWBzGwH4BJim/8v1KD5oQYBAODuU0ghEHKNczY/cGlOb5G2mdmngIuJbf4/k5o/8rL5EatFAAC4+1Ok24tFh8AlOcVFhs3MdqSY5t8gz/VaqE0AwOwQWB/o+FZHLeYHLs5pLjJPZrYzcBGxD8z5E+mTvzbNDzULAAB377/T6R8Dy/aHwI6BNaUHmdkuwIXENv8fSc0fefPcELULAAB3f4b0deAPgWXnAy4ys50Ca0oPMbP/BS4gtvn/QNrtj3yGRphaBgAUGgI/zrt4IrOZ2adpWPNDjQMAwN2nkkLg94Fl5wMuzLt6IpjZrsCPiO2H35Oaf2pgzXC1DgCYIwR+F1h2PuCCvMsnDWZmnwF+SGwv/I4uaH7oggAAcPdngQ2B3waW7Q+BXQNrShcxs/8Dzie2D34LbJjnbO11RQBAYSHQB/wwfwpIg5jZZ4FzaXDzQxcFAIC7P0f6OvCbwLJ9wPlmtltgTakxM9sdOIfY+f8b0m7/c4E1C9dVAQDg7n8j7Qn8OrBsH3Be3iWUHmZmnyO++X9N+uT/W2DNUnRdAMAcIfCrwLJ9wLl511B6kJl9ATgbsMCyv6JLmx+6NAAA3P15YDTwUGDZ/hDYPbCm1ICZ7QGcRWzzPwSMznOxK3VtAMAcIfBgYFkDzsm7itIDzGxP4Exim/9Burz5ocsDAMDd/w58gvgQONvMPh9YUypgZl8Evk98838iz72u1vUBALNDYDTwy8CyBvwg7zpKFzKzvYEziG3+X5I++bu++aFHAgDA3aeR9gQeCCxrwJl5F1K6iJntA5xObPM/QPrknxZYs1I9EwAwRwjcH1jWgO/nXUnpAma2L3BacNn76bHmhx4LAAB3/wewEfCLwLIGnGFmewXWlAKY2ZeAU4PL/gLYKM+tntJzAQBzhMB9gWUNOD1/r5QaMrP9gVOCy95HjzY/9GgAALj7C8DGwM8Dy/aHwD6BNSWAmR0AnBxc9ufAxnku9aSeDQCYIwQmBZc+Le9qSg2Y2YHAd4PLTqLHmx96PAAA3P2fwCbAxODSp5jZfsE1pU1m9hXgpOCyE4FN8tzpaT0fAFBoCHwvf++UCpjZV4ETgss2pvmhIQEA4O4vkkLg3uDSJ+fvn1IiMzsI+E5w2XtJzf9icN3aakwAwOwQ2BSYEFz6u2b25eCaMggzOxg4PrjsBGDTJjU/NCwAYI4QuCe49In5+6gUyMwOAY4LLnsPDWx+aGAAALj7S8BmwN3BpU/I30ulAGZ2KHBscNm7gc3ynGicRgYAzBECdwWX/k7+fiqBzOzrwDHBZe+iwc0PDQ4AAHd/GdgcuDO49PH5e6oEMLPDgW8Hl70T2DzPgcZqdADAHCFwR3Dp4/L3VemAmX0DODq47B2o+QEFAADuPh3YAhgfXPrY/L1VRsDMjgCOCi47Htgiv+eNpwDI8oTYErg9uPQxZnZYcM2eZ2bfAr4VXPZ2YEs1/2sUAC1aQuC24NJj8/dYGQYzOwo4Irjsbaj556IAeB13/xewFXBrcOmj8/dZGYKZHQ1Eb6dbga3yeystFAADyBNla+CW4NJHmdk3g2v2DDP7NhC9p3QLsLWaf2AKgEG0hMDPgksfmQ9uSQszOwb4enDZn6HmH5ICYAju/m9gG+Dm4NLfMrMjg2t2LTM7Foj+teRmYJv8HsogFADzkCfQtsBNwaW/mQ92NZqZHQdEny9xE7Ctmn/eFADD0BICNwaX/kY+6NVIZnY8EH3G5I2o+YdNATBM7j4D2A64Ibj04WY2Nrhm7ZnZd4DoayZuALbL75UMgwKgDXlijQGuDy59WD4I1ghmdgIQfdXk9cAYNX97FABtagmB64JLH5oPhvU0MzsJiL5vwnWo+UdEATAC7v4fYHtgXHDpQ/JBsZ5kZt8FDgwuOw7YPr8n0iYFwMjNBIq4g8zB+eBYTzGzk4Ei7p34Ium9kBFQAIyAmc0HXAjsUtAiDsoHyXqCmZ0CFHX35F2AC/N7Im1SALQpT7SLgJ0LXtRX88GyrmZmpwJFP0RlZ+AihUD7FABtMLP5gYuBHUta5FfM7MSSlhXOzE4D9i1pcTsCF+f3SIZJATBMLc3/qZIX/eV88KxrWHI6UPYzFD+FQqAtCoBhyBPqUmCHioZwQD6IVntmZsAZQFVPUd4BuFQhMDwKgHkwswWAy0g/+1VpfzP7XsVjGFJu/u8DX6x4KNsDl+X3ToagABhCS/OPqXos2X75iHrt5OY/E9iz6rFkY1AIzJMCYBB54lxOOv+/Tr6Uj6zXRm7+s4A9qh7L62wHXK4QGJwCYABmtiBwBekKwDra18xOz41XqTyGs4EvVD2WQWwLXJHfU3kdBcDrtDT/1sGlHw6utzdQaQiYWR9wDvC54NLR22prFAIDUgC0yBPkStJNQSOdAbyDdAJRpL1Iu7iLBtedJzNbHLgK2D249I9J2+qM4LpbAVcqBObmI325O73yAhYiXVU24u0xyOvUlmX0kU4hjl7Gg8AqJW6rVYFfFbAeFwB9Lcs5tYBlXAcsVPV8C34/OtkeCgBS899QwGQ7ZYBlFRUCU4H1SthW6wHPFjD+H9HS/C3LO6WAZd1AD4VAh9ui2QFAav4bC5hkJw+xzD7Sp130Mp30y8WaBWynNXPtIsZ8PgM0f8uyTy5gmTfSIyHQ4XZobgAAC5NuIBk9uU4axrL7SJ96RTTUK6Tf5FcK2EYr5VqvFDTW8xii+VvGcVIBy74JWLjqeRjwHikARtj8NxcwqU5sYwxFhoADs4CJpFtur9XGuNbK/2ZirlHU+M5lGM3fMq4TCxjDzXR5CHSy/pb/jxFx98p/hx4JM1sEuAbYKLj0Ce7e1o0u809p5wG7BY9lIE8AjwHPkI4ZPJP/fHlgufy/qwErlzCWc4EveJ7Bw5XvkxB9P8FbSM8Q6MoHiJjZiHsYGrYHACxCelZc9CfJ8R2MqY/0PbioT9q6vX4AWAfb6/gCxnQrsEjV87PsPYCO/nHVKz6CDbUo6Smx0ZPnuICxNSUEzqKD5m/ZXscVMLbbgEWrnqcKgOKa//YCJs0xgWPs/zpQdZMW9TqTgOZv2V7HFDDG2+myEOhwfXs/AIDFgPEFTJaxBYy1j/QpWXWzRr9OIbD5W7bX2ALGOh5YrOp5qwCIa/47CpgkRxc87v2BV2vQuJ2+XgH2KXhbHV3AuO+gS0Kgw/Xs3QAAFgfuLGByHFnS+EcDz9egiUf6eh7YsKRtdWQB478TWLzqeTyMdVcADLBRFgfuKmBSHFHyeqwO/LYGzdzu6/fA6iVvqyMKWI+7qHkIdLh+vRcAwBLAPQVMhm9WtD6LA1fXoKmH+7oeWLKibfXNAtbnHmCJquf1EOusAGjZGEsAEwqYBIdXvF5Gur9+ERfiRL3+TjpJZ9hn9xW0rQ4vYN0m1DUEFACvbYglgXsLePMPq3rdWtZxCeAo4KUaNHz/azpwLLB01dunZTsdVsB63ktFezbzWFcFQG7+iQW86YdWvW6DrO/ypJtmFHWRznBer5B+slyx6u0xyDY6tIB1nli3EGh8AABLAZMKeLMPrnrdhrHua5AeWDK9xMafDlxCAZcdF7B9Di5g/ScBS1W9bi3rOOJ16fqLgcxsKeBnwAeDS3/N3bvmAZ35tmCjSbe+2hJYIXgRT5PupjMOuM3dpwfXL4yZHUS6fiDSfcDG7v5CcN22dXIxUFcHgJktTWr+dYNLH+TuXftgznyj0A+QwmAz0k+Jy7RZ5u/AI6QbZ4wDHvD8cdONzOyrQHSg/4IUAv8IrtuWRgZAbv5bgHWCS3/F3U8Krlk5M1uIdNxghde9IH26t76ecfcZVYyzSGb2ZdI9BSLdD2xUZQg0LgDM7A2k5v9AcOkD3b0rnsEnI2NmBwDRD1t9gBQC04LrDksnAdB1twU3s2VI125HN/8Bav7el9/jA4LLfgC4Nc/NrtJVAdDS/O8PLr2fu9f6wZsSJ7/X+wWXfT9dGAJdEwBm9kbSDRveF1x6X3ev1bP2pHj5Pd83uOz7gNvyXO0KXREALc3/3sCyTrpM9fTAmtJF8nu/Dx0cBxvAe+miEKh9AJjZf5Hu0vKewLIO7O3u0Y+fki6T58DexIbAe4Db89yttVoHgJktS2r+tQPLOrCXu58ZWFO6WJ4LexEbAmuTQmDZwJrhahsALc3/7sCyDuzp7mcF1pQekOfEnsSGwLupeQjUMgDM7E2k+7K9K7CsA3u4+9mBNaWH5LmxB7Eh8C5gfJ7TtVO7ADCz5UjNv1Zg2VnA5939nMCa0oPyHPk8ac5EWYsUAssF1gxRqwBoaf53Bpbtb/7zAmtKD8tzJToE3kkNQ6A2AWBmy5PuxPqOwLKzgN3d/fzAmtIAec7sTmwIvAO4I8/1WqhFAJjZCqTmf3tg2VnAZ939R4E1pUHy3PkssSHwdlIIRF+uPSKVB4CZrUja7X9bYNlZwG7ufkFgTWmgPId2IzYE3kb6OrBiYM0RqTQACmr+mcBn3P3HgTWlwfJc+gxpbkWpRQhUFgBmNoq0279mYNmZwK7uflFgTRHynNqV2BBYk/R1YFRgzbZUEgBmthKp+dcILDsT+LS7XxJYU2S2PLc+TWwIrEEKgZUCaw5b6QFgZiuTmv+tgWVfBXZx90sDa4rMJc+xXUhzLspbSSGwcmDNYSk1AFqaf/XAsv3Nf3lgTZFB5bkWHQKrU0EIlBYAZrYK6WGLbwks+yqwk7v/JLCmyDzlObcTsSHwFuDO3CulKCUAzGxV0if/mwPLvgLs6O5XBtYUGbY893YkzcUobybtCawaWHNQhQeAma1Gcc1/VWBNkbblOVhUCKwWWHNAhQZAS/OvFlj2FWAHd/9pYE2REctzcQdiQ2A1SgiBwgLAzN5M+s4fuSvzH+CT7n5NYE2RjuU5+UnSHI2yKumYQOTe8xwKCQAzewup+SMPZvQ3/7WBNUXC5LkZHQKrkEIg8uD5bOEBYGark3b7I3/OmAGMcfdxgTVFwuU5OoY0Z6OsTPo6EPnzORAcAGb2Vopr/usDa4oUJs/VokIg8gS6uAAwszVIzR95SuMMYDt3vyGwpkjh8pzdjtgQWIkUAmGn0IcEgJmtSWr+yIsa/g1s4+43BtYUKU2eu9uQ5nKUUaQQCLmIruMAyAMZD0Re1tjf/DcH1hQpXZ7D0SGwIulS4o5DoKOnA5PubjKe1x4zHeFfpOa/JbCmSKXMbCPgGmCRwLJPAxsAfxxpgU4D4BnSM+ej/AvYyt1vC6wpUgtmNhoYR2wIdNSDnQZApOmk5r+96oGIFMXMNiSFwKJVjwXqEwDTgS3dfXzVAxEpmpltAFxHDUKgj9i7m4zEy8AWan5pijzXtyDN/SrN7AOmVjiAl4HN3f2OCscgUro85zen2hCY2gc8VdHCXwI2c/e7Klq+SKXy3N+M1AtVeKoPmFLBgvub/+4Kli1SG7kHqgqBp6rYA3gR2NTd7yl5uSK1lHthU1JvlGlKH3B/iQvsb/4JJS5TpPZyT5QdAg8asCzpZIKibw/2T1LzTyx4OSJdy8w+DNwELFnwomYBK/a5+3PAvQUv7AVgYzW/yNByj2xM6pkiTXL3qfPn/+dq4GMFLmwpYJKZFbgIEWnDNQDm7v3P6XsYWLjaMYlICWYAa7r75D4Ad58CnFLtmESkJKe5+2TIewAAZrY08AiwTIUDE5FiTQNWd/dp0HLk393/AYytalQiUoqx/c0PLXsAAGa2IHAbxR4QFJFqTAA2dPfZty2fIwAAzGxZ4D5in+YjItWaDKzr7s+2/uFcJ//k8wK2proLFEQk1nTSbfaeff1/GPDsP3f/DekJJwoBke42nfQg3YcG+o9zfQWY4z+arQ1cS+zz/USkHE+SPvl/OdhfGPL8f3f/NfBB0sEDEekeE4F1hmp+GMYFQPl7w4bA10i/IYpIfb0AHAZs4O7zvNvXkF8B5vrL6WShQ4D9iL21sYh0ZgZwBul3/ueH+4/aCoDZ/8hsBWAn0hNPPgbM13YREenULGAS6TjdJf2n97ZjRAEwRwGzNwJbAeuSHlk0Kr+WQ8EgEmEm6ea9U0h38JpCupHPdfln+xHrOABEpHsVfRcgEakxBYBIgykARBpMASDSYAoAkQZTAIg0mAJApMEUACINpgAQaTAFgEiDKQBEGkwBINJgCgCRBlMAiDSYAkCkwRQAIg2mABBpMAWASIMpAEQaTAEg0mAKAJEGUwCINJgCQKTBFAAiDaYAEGkwBYBIgykARBpMASDSYAoAkQZTAIg0mAJApMEUACINpgAQaTAFgEiDKQBEGkwBINJgCgCRBvt/Hfx8EQvICNIAAAAASUVORK5CYII=)\r\n"
                + //
                "\r\n" + //
                "another image\r\n" + //
                "\r\n" + //
                "![](data:image/png;base64,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)\r\n"
                + //
                "\r\n" + //
                "end of images";
    }

    public static List<String> extractByteStreams(String markdown) {
        List<String> byteStreams = new ArrayList<>();
        int startIndex = 0;

        while (true) {
            // Find the start of the image markdown syntax
            startIndex = markdown.indexOf("![", startIndex);
            System.err.println("start" + startIndex);

            int dIndex = markdown.indexOf("data:image/", startIndex);
            int slashIndex = markdown.indexOf("data:image/", startIndex) + 10;
            System.out.println(markdown.charAt(dIndex) + " | " + markdown.charAt(slashIndex));
            // System.out.println();

            if (startIndex == -1)
                break; // No more images

            // Find the closing parenthesis of the markdown syntax
            int endIndex = markdown.indexOf(")", startIndex);
            if (endIndex == -1)
                break; // Malformed markdown

            // Extract the content inside the parentheses
            String imageLink = markdown.substring(startIndex, endIndex);
            if (imageLink.contains("data:image/")) {
                // Find the base64 string
                int base64Index = imageLink.indexOf(",") + 1; // +1 to skip the comma
                String base64 = imageLink.substring(base64Index);
                byteStreams.add(base64);
            }

            // Move to the next character after the closing parenthesis
            startIndex = endIndex + 1;
        }

        return byteStreams;
    }

    public static List<String> regexSolution(String str) {
        // Regular expression pattern to find text in parentheses starting with
        String regex = "\\(data:image/\\s*([^)]*)\\)";
        Pattern pattern = Pattern.compile(regex);
        Matcher matcher = pattern.matcher(str);

        // List to hold the results
        List<String> results = new ArrayList<>();

        // Find all matches
        while (matcher.find()) {
            // Get the captured group
            String match = matcher.group(1).trim();
            results.add(match);
        }

        return results;
    }

    public static void printListOfStrings(List<String> results) {
        // Print the results
        for (String match : results) {
            // + 1 to skip comma itself
            int commaIndex = match.indexOf(',') + 1;

            System.out.println(match.substring(commaIndex));
            System.out.println("");
            System.out.println("");
        }
    }

    public static void createTemp(String base64String, int count) throws IOException {
        byte[] imageBytes = Base64.getDecoder().decode(base64String);
        String filePath = "./image" + count + ".png";

        File imgFile = new File(filePath);
        try (FileOutputStream fos = new FileOutputStream(imgFile)) {
            fos.write(imageBytes);
            fos.flush();
        }
        System.out.println(imageBytes);
        System.out.println(imgFile);
    }

    public static void main(String[] args) {
        // System.out.println(new App().getGreeting());
        String inputString = getMarkdown();
        // printListOfStrings(regexSolution(inputString));
        List<String> listOfByteStrings = extractByteStreams(inputString);
        // printListOfStrings();

        try {
            for (int count = 0; count < listOfByteStrings.size(); count++) {
                String base64 = listOfByteStrings.get(count);
                createTemp(base64, count);
            }
        } catch (Exception e) {
            System.out.println(e);
        }

    }
}
